webpackJsonp([17],{233:function(t,e,i){"use strict";function s(){h.call(this),this.fConfirmCallback=null,this.confirmDesc=r.observable(""),this.popupHeading=r.observable(""),this.okButtonText=r.observable(a.i18n("COREWEBCLIENT/ACTION_OK")),this.cancelButtonText=r.observable(a.i18n("COREWEBCLIENT/ACTION_CANCEL")),this.shown=!1}var n=i(2),o=i(1),r=i(46),a=i(43),h=i(188);n.extendOwn(s.prototype,h.prototype),s.prototype.PopupTemplate="CoreWebclient_ConfirmPopup",s.prototype.onOpen=function(t,e,i,s,n){this.confirmDesc(t),this.popupHeading(i||""),this.okButtonText(s||a.i18n("COREWEBCLIENT/ACTION_OK")),this.cancelButtonText(n||a.i18n("COREWEBCLIENT/ACTION_CANCEL")),o.isFunction(e)&&(this.fConfirmCallback=e),this.shown=!0},s.prototype.onHide=function(){this.shown=!1},s.prototype.onEnterHandler=function(){this.yesClick()},s.prototype.yesClick=function(){this.shown&&this.fConfirmCallback&&this.fConfirmCallback(!0),this.closePopup()},s.prototype.cancelPopup=function(){this.fConfirmCallback&&this.fConfirmCallback(!1),this.closePopup()},t.exports=new s},258:function(t,e,i){function s(t){this.sName="",this.visible=n.observable(!0),this.baseHash=n.observable(""),this.hash=n.observable(""),this.linkText=n.observable(t),this.isCurrent=n.observable(!1),this.recivedAnim=n.observable(!1).extend({autoResetToFalse:500}),this.unseenCount=n.observable(0),this.allowChangeTitle=n.observable(!1),this.inactiveTitle=n.observable(""),this.excludedHashes=n.observableArray([])}var n=i(46),o=i(189);s.prototype.ViewTemplate="CoreWebclient_HeaderItemView",s.prototype.setName=function(t){this.sName=t.toLowerCase(),""===this.baseHash()?(this.hash(o.buildHashFromArray([t.toLowerCase()])),this.baseHash(this.hash())):this.hash(this.baseHash())},t.exports=s},347:function(t,e,i){"use strict";t.exports=function(t){var e=i(179),s=e.getUserRole()===Enums.UserRole.SuperAdmin,n=e.getUserRole()===Enums.UserRole.NormalUser,o=e.getUserRole()===Enums.UserRole.Customer,r=null;if(s||n||o){var a=i(348);if(a.init(t),s)return{getAbstractSettingsFormViewClass:function(){return i(349)}};if(n||o)return{getScreens:function(){var t={};return t[a.HashModuleName]=function(){return i(350)},t},getHeaderItem:function(){if(null===r){var t=i(43),e=i(258);r=new e(t.i18n("COREWEBCLIENT/HEADING_SETTINGS_TABNAME"))}return{item:r,name:a.HashModuleName}},registerSettingsTab:function(t,e,s){var n=i(350);n.registerTab(t,e,s)},registerSettingsTabSection:function(t,e,s){var n=i(350);n.registerTabSection(t,e,s)},getAbstractSettingsFormViewClass:function(){return i(349)},setAddHash:function(t){var e=i(350);e.setAddHash(t)}}}return null}},348:function(t,e,i){"use strict";var s=i(2),n=i(44);t.exports={HashModuleName:"settings",TabsOrder:["common","mail","mail-accounts","contacts","calendar","files","mobilesync","outlooksync","helpdesk","openpgp"],init:function(t){var e=t.SettingsWebclient;s.isEmpty(e)||(this.TabsOrder=n.pArray(e.TabsOrder,this.TabsOrder))}}},349:function(t,e,i){"use strict";function s(t){this.sServerModule=t?t:"Core",this.isSaving=o.observable(!1),this.visible=o.observable(!0),this.sSavedState="",this.bShown=!1,this.SettingsTabName="",this.SettingsTabTitle="",this.aSettingsSections=[]}var n=i(2),o=i(46),r=i(43),a=i(185),h=i(181),u=i(182),c=i(186),l=i(233);s.prototype.ViewTemplate="",s.prototype.addSettingsSection=function(t){this.aSettingsSections.push(t)},s.prototype.showTab=function(t){this.bShown=!0,this.revert(),n.isFunction(this.onShow)&&this.onShow(t),n.each(this.aSettingsSections,function(e){n.isFunction(e.onShow)&&e.onShow(t)})},s.prototype.hide=function(t,e){var i=this.getCurrentState()!==this.sSavedState;n.each(this.aSettingsSections,function(t){n.isFunction(t.getCurrentState)&&(i=i||t.getCurrentState()!==t.sSavedState)}),i?c.showPopup(l,[r.i18n("COREWEBCLIENT/CONFIRM_DISCARD_CHANGES"),n.bind(function(i){i?(this.bShown=!1,t(),this.revert()):n.isFunction(e)&&e()},this)]):(this.bShown=!1,t())},s.prototype.getCurrentValues=function(){return[]},s.prototype.getCurrentState=function(){var t=this.getCurrentValues();return t.join(":")},s.prototype.updateSavedState=function(){this.sSavedState=this.getCurrentState()},s.prototype.revertGlobalValues=function(){},s.prototype.revert=function(){n.each(this.aSettingsSections,function(t){n.isFunction(t.revert)&&t.revert()}),this.revertGlobalValues(),this.updateSavedState()},s.prototype.getParametersForSave=function(){return{}},s.prototype.save=function(){n.isFunction(this.validateBeforeSave)&&!this.validateBeforeSave()||(this.isSaving(!0),a.send(this.sServerModule,"UpdateSettings",this.getParametersForSave(),this.onResponse,this))},s.prototype.applySavedValues=function(t){},s.prototype.onResponse=function(t,e){if(this.isSaving(!1),t.Result){var i=e.Parameters;this.updateSavedState(),this.applySavedValues(i),u.showReport(r.i18n("COREWEBCLIENT/REPORT_SETTINGS_UPDATE_SUCCESS"))}else h.showErrorByCode(t,r.i18n("COREWEBCLIENT/ERROR_SAVING_SETTINGS_FAILED"))},s.prototype.setAccessLevel=function(t,e){},t.exports=s},350:function(t,e,i){"use strict";function s(){u.call(this,"SettingsWebclient"),this.tabs=r.observableArray([]),this.currentTab=r.observable(null),a.subscribeEvent("OpenSettingTab",n.bind(function(t){this.changeTab(t.Name)},this)),a.broadcastEvent("SettingsWebclient::ConstructView::after",{Name:this.ViewConstructorName,View:this})}var n=i(2),o=i(1),r=i(46),a=i(179),h=i(189),u=i(192),c=i(348),l=o("html");n.extendOwn(s.prototype,u.prototype),s.prototype.ViewTemplate="SettingsWebclient_SettingsView",s.prototype.ViewConstructorName="CSettingsView",s.prototype.registerTab=function(t,e,i){var s=c.TabsOrder.length,o=t(),r=n.findWhere(this.tabs(),{name:e});n.isEmpty(o)||(o.SettingsTabName=e,o.SettingsTabTitle=i,r&&(n.isArray(r.sections)&&(n.each(r.sections,function(t){o.addSettingsSection(t)}),delete r.sections),r.view=o)),r||this.tabs.push({view:o,name:e}),this.tabs(n.sortBy(this.tabs(),function(t){var e=n.indexOf(c.TabsOrder,t.name);return e!==-1?e:s}))},s.prototype.registerTabSection=function(t,e){var i=n.findWhere(this.tabs(),{name:e}),s=t();i?i.view.addSettingsSection(s):(this.registerTab(function(){return{}},e,""),i=n.findWhere(this.tabs(),{name:e}),i&&(n.isArray(i.sections)||(i.sections=[]),i.sections.push(s)))},s.prototype.onShow=function(){l.addClass("non-adjustable")},s.prototype.onHide=function(){l.removeClass("non-adjustable")},s.prototype.onRoute=function(t){var e=t.shift(),i=this.currentTab(),s=n.find(this.tabs(),function(t){return t.name===e}),o=function(){s&&(n.isFunction(s.view.showTab)&&s.view.showTab(t),this.currentTab(s),s.name!==e&&h.replaceHashDirectly([c.HashModuleName,s.name]))}.bind(this),r=n.bind(function(){i&&h.replaceHashDirectly([c.HashModuleName,i.name])},this),a=!0;return i&&e===i.name?void(n.isFunction(i.view.showTab)&&i.view.showTab(t)):(s&&s.view.visible&&!s.view.visible()&&(s=n.find(this.tabs(),function(t){return!t.view.visible||t.view.visible()})),s?i&&n.isFunction(i.view.hide)&&(i.view.hide(o,r),a=!1):i||(s=n.find(this.tabs(),function(t){return!t.view.visible||t.view.visible()})),void(a&&o()))},s.prototype.changeTab=function(t){h.setHash([c.HashModuleName,t])},s.prototype.setAddHash=function(t){h.setHash(n.union([c.HashModuleName,this.currentTab()?this.currentTab().name:""],t))},t.exports=new s}});