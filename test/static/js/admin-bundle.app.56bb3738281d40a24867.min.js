webpackJsonp([1],{231:function(t,e,i){"use strict";var s=i(2),n=i(44);t.exports={ServerModuleName:"AdminPanelWebclient",HashModuleName:"admin",EntitiesData:[{Type:"User",ScreenHash:"users",LinkTextKey:"ADMINPANELWEBCLIENT/HEADING_USERS_SETTINGS_TABNAME"}],EntitiesPerPage:20,TabsOrder:["licensing","admin-security","admin-db","logs-viewer","system","common","modules","mail","mail-domains","mail-accounts","mail-servers","contacts","calendar","files","mobilesync","outlooksync","helpdesk","openpgp"],init:function(t){var e=t.Core;s.isEmpty(e)||(this.EntitiesPerPage=n.pPositiveInt(e.EntitiesPerPage,this.EntitiesPerPage),this.TabsOrder=n.pArray(e.TabsOrder,this.TabsOrder))}}},232:function(t,e,i){"use strict";function s(t){this.sServerModule=t?t:"Core",this.isSaving=o.observable(!1),this.visible=o.observable(!0),this.sSavedState="",this.bShown=!1}var n=i(2),o=i(46),r=i(43),a=i(185),u=i(181),c=i(182),h=i(186),p=i(233);s.prototype.ViewTemplate="",s.prototype.onRoute=function(t){this.bShown=!0,this.revert(),n.isFunction(this.onRouteChild)&&this.onRouteChild(t)},s.prototype.hide=function(t,e){this.getCurrentState()!==this.sSavedState?h.showPopup(p,[r.i18n("COREWEBCLIENT/CONFIRM_DISCARD_CHANGES"),n.bind(function(i){i?(this.bShown=!1,t(),this.revert()):n.isFunction(e)&&e()},this)]):(this.bShown=!1,t())},s.prototype.getCurrentValues=function(){return[]},s.prototype.getCurrentState=function(){var t=this.getCurrentValues();return t.join(":")},s.prototype.updateSavedState=function(){this.sSavedState=this.getCurrentState()},s.prototype.revertGlobalValues=function(){},s.prototype.revert=function(){this.revertGlobalValues(),this.updateSavedState()},s.prototype.getParametersForSave=function(){return{}},s.prototype.save=function(){n.isFunction(this.validateBeforeSave)&&!this.validateBeforeSave()||(this.isSaving(!0),a.send(this.sServerModule,"UpdateSettings",this.getParametersForSave(),this.onResponse,this))},s.prototype.applySavedValues=function(t){},s.prototype.onResponse=function(t,e){if(this.isSaving(!1),t.Result){var i=e.Parameters;this.updateSavedState(),this.applySavedValues(i),c.showReport(r.i18n("COREWEBCLIENT/REPORT_SETTINGS_UPDATE_SUCCESS"))}else u.showErrorByCode(t,r.i18n("COREWEBCLIENT/ERROR_SAVING_SETTINGS_FAILED"))},s.prototype.setAccessLevel=function(t,e){},t.exports=s},233:function(t,e,i){"use strict";function s(){u.call(this),this.fConfirmCallback=null,this.confirmDesc=r.observable(""),this.popupHeading=r.observable(""),this.okButtonText=r.observable(a.i18n("COREWEBCLIENT/ACTION_OK")),this.cancelButtonText=r.observable(a.i18n("COREWEBCLIENT/ACTION_CANCEL")),this.shown=!1}var n=i(2),o=i(1),r=i(46),a=i(43),u=i(188);n.extendOwn(s.prototype,u.prototype),s.prototype.PopupTemplate="CoreWebclient_ConfirmPopup",s.prototype.onOpen=function(t,e,i,s,n){this.confirmDesc(t),this.popupHeading(i||""),this.okButtonText(s||a.i18n("COREWEBCLIENT/ACTION_OK")),this.cancelButtonText(n||a.i18n("COREWEBCLIENT/ACTION_CANCEL")),o.isFunction(e)&&(this.fConfirmCallback=e),this.shown=!0},s.prototype.onHide=function(){this.shown=!1},s.prototype.onEnterHandler=function(){this.yesClick()},s.prototype.yesClick=function(){this.shown&&this.fConfirmCallback&&this.fConfirmCallback(!0),this.closePopup()},s.prototype.cancelPopup=function(){this.fConfirmCallback&&this.fConfirmCallback(!1),this.closePopup()},t.exports=new s},234:function(t,e,i){"use strict";function s(){l.call(this,"AdminPanelWebclient"),this.aScreens=[{sHash:p.buildHashFromArray(d.get("")),sLinkText:u.i18n("ADMINPANELWEBCLIENT/HEADING_SYSTEM_SETTINGS_TABNAME"),sType:"",oView:null}],n.each(E.EntitiesData,n.bind(function(t){var e=new b(t.Type),i=n.bind(function(t,e,i){"create"===i?this.createEntity():t===this.currentEntityType()&&this.changeEntity(t,e,i||"")},this);e.setChangeEntityHandler(i),this.aScreens.push({sHash:p.buildHashFromArray(d.get(t.Type)),sLinkText:u.i18n(t.LinkTextKey),sType:t.Type,oView:e})},this)),this.currentEntityType=r.observable(""),this.currentEntitiesId=r.observable({}),this.currentEntitiesView=r.computed(function(){var t=this.currentEntityType(),e=n.find(this.aScreens,function(e){return e.sType===t});return e?e.oView:null},this),this.currentEntitiesView.subscribe(function(){this.currentEntitiesView()&&this.currentEntitiesView().onShow()},this),this.showModulesTabs=r.computed(function(){return""===this.currentEntityType()||this.currentEntitiesView().hasSelectedEntity()},this),this.tabs=r.observableArray([]),this.currentTab=r.observable(null),this.aStartErrors=[],c.broadcastEvent("AdminPanelWebclient::ConstructView::after",{Name:this.ViewConstructorName,View:this})}var n=i(2),o=i(1),r=i(46),a=i(3),u=i(43),c=i(179),h=i(182),p=i(189),l=i(192),d=i(235),E=i(231),b=i(236);n.extendOwn(s.prototype,l.prototype),s.prototype.ViewTemplate="AdminPanelWebclient_SettingsView",s.prototype.ViewConstructorName="CSettingsView",s.prototype.registerTab=function(t,e,i){if(n.isFunction(t)){var s=this.tabs;return new a(t).then(function(t){s.push({view:t,name:e,title:i})})}return!1},s.prototype.sortRegisterTabs=function(){this.tabs(n.sortBy(this.tabs(),function(t){var e=n.indexOf(E.TabsOrder,t.name);return e!==-1?e:E.TabsOrder.length}))},s.prototype.cancelCreatingEntity=function(){p.setHash(d.get(this.currentEntityType(),{},""))},s.prototype.createEntity=function(){p.setHash(d.get(this.currentEntityType(),{},"create"))},s.prototype.changeEntity=function(t,e,i){var s=n.clone(this.currentEntitiesId()),o=!!n.find(this.tabs(),function(t){return t.name===i}),r=this.currentTab()?this.currentTab().name:"";s[t]=e,p.setHash(d.get(t,s,o?i:r))},s.prototype.onBind=function(){n.each(this.tabs(),n.bind(function(t){if(t.view&&n.isFunction(t.view.getStartError)){var e=t.view.getStartError();n.isFunction(e)&&(e.subscribe(function(){this.showStartError()},this),this.aStartErrors.push(e))}},this)),this.showStartError()},s.prototype.showStartError=function(){var t=[];n.each(this.aStartErrors,function(e){var i=e();""!==i&&t.push(i)}),h.showError(t.join("<br /><br />"),!0)},s.prototype.onRoute=function(t){var e=d.parse(t),i=t.slice(1),s=this.currentEntityType()===e.CurrentType,r=this.currentEntitiesId()[e.CurrentType]===e.Entities[e.CurrentType],a=this.currentTab()&&this.currentTab().name===e.Last,u=this.currentTab(),c=n.bind(function(){this.showNewScreenView(e),this.showNewTabView(e.Last,i)},this),h=n.bind(function(){u&&p.replaceHashDirectly(d.get(this.currentEntityType(),this.currentEntitiesId(),this.currentTab()?this.currentTab().name:""))},this);s&&r&&a?u&&u.view.onRoute(i):u&&o.isFunction(u.view.hide)?u.view.hide(c,h):c()},s.prototype.showNewScreenView=function(t){var e=n.find(this.aScreens,function(e){return e.sType===t.CurrentType});this.currentEntityType(t.CurrentType),this.currentEntitiesId(t.Entities),e&&e.oView&&("create"===t.Last?e.oView.openCreateForm():e.oView.cancelCreatingEntity(),e.oView.changeEntity(t.Entities[t.CurrentType]))},s.prototype.showNewTabView=function(t,e){n.each(this.tabs(),n.bind(function(t){t.view&&n.isFunction(t.view.setAccessLevel)&&t.view.setAccessLevel(this.currentEntityType(),this.currentEntitiesId()[this.currentEntityType()])},this));var i=n.find(this.tabs(),function(e){return e.name===t});i&&i.view&&i.view.visible()||(i=n.find(this.tabs(),function(t){return t.view&&t.view.visible()})),i&&(o.isFunction(i.view.onRoute)&&i.view.onRoute(e),this.currentTab(i))},s.prototype.changeTab=function(t){p.setHash(d.get(this.currentEntityType(),this.currentEntitiesId(),t))},s.prototype.logout=function(){c.logout()},s.prototype.deleteCurrentEntity=function(){this.currentEntitiesView()&&this.currentEntitiesView().deleteCurrentEntity()},s.prototype.setAddHash=function(t){p.setHash(n.union([E.HashModuleName,this.currentTab()?this.currentTab().name:""],t))},t.exports=new s},235:function(t,e,i){"use strict";function s(t){return c===t.substr(0,1)&&/^[1-9][\d]*$/.test(t.substr(c.length))}function n(t){return u===t.substr(0,u.length)}var o=i(2),r=i(44),a=i(231),u="s.",c="p.",h={};h.get=function(t,e,i,s,n){var h=[a.HashModuleName];return e=e||[],o.each(a.EntitiesData,function(i){r.isPositiveNumber(e[i.Type])?h.push(i.ScreenHash.substr(0,1)+e[i.Type]):t===i.Type&&h.push(i.ScreenHash)}),r.isPositiveNumber(s)&&s>1&&h.push(c+s),r.isNonEmptyString(n)&&h.push(u+n),r.isNonEmptyString(i)&&h.push(i),h},h.parse=function(t){var e=0,i={},h="",p=1,l="",d="";return o.each(a.EntitiesData,function(o){t[e]&&o.ScreenHash===t[e]&&(h=o.Type,e++),t[e]&&o.ScreenHash.substr(0,1)===t[e].substr(0,1)&&r.pInt(t[e].substr(1))>0&&(i[o.Type]=r.pInt(t[e].substr(1)),h=o.Type,e++),t.length>e&&(d=r.pString(t[e]),s(d)&&(p=r.pInt(d.substr(c.length)),p<=0&&(p=1),e++)),t.length>e&&(d=r.pString(t[e]),n(d)&&(l=d.substr(u.length),e++))}),{Entities:i,CurrentType:h,Last:r.isNonEmptyString(t[e])?t[e]:"",Page:p,Search:l}},t.exports=h},236:function(t,e,i){"use strict";function s(t){this.sType=t,this.oEntityCreateView=this.getEntityCreateView(),this.entities=o.observableArray([]),this.totalEntitiesCount=o.observable(0),this.current=o.observable(0),this.showCreateForm=o.observable(!1),this.isCreating=o.observable(!1),this.hasSelectedEntity=o.computed(function(){var t=n.map(this.entities(),function(t){return t.Id});return n.indexOf(t,this.current())!==-1},this),this.justCreatedId=o.observable(0),this.fChangeEntityHandler=function(){},o.computed(function(){0===this.justCreatedId()&&!this.showCreateForm()&&!this.hasSelectedEntity()&&this.entities().length>0&&this.fChangeEntityHandler(this.sType,this.entities()[0].Id)},this).extend({throttle:1}),this.checkedEntities=o.computed(function(){return n.filter(this.entities(),function(t){return t.checked()},this)},this),this.hasCheckedEntities=o.computed(function(){return this.checkedEntities().length>0},this),this.deleteCommand=u.createCommand(this,this.deleteCheckedEntities,this.hasCheckedEntities),this.deactivateCommand=u.createCommand(this,function(){},this.hasCheckedEntities),this.selectedCount=o.computed(function(){return this.checkedEntities().length},this),this.searchValue=o.observable(""),this.newSearchValue=o.observable(""),this.isSearchFocused=o.observable(!1),this.loading=o.observable(!1),this.searchText=o.computed(function(){return r.i18n("ADMINPANELWEBCLIENT/INFO_SEARCH_RESULT",{SEARCH:this.searchValue()})},this),this.oPageSwitcher=new p(0,b.EntitiesPerPage),this.oPageSwitcher.currentPage.subscribe(function(){this.loading(!0),this.requestEntities()},this),this.totalEntitiesCount.subscribe(function(){this.oPageSwitcher.setCount(this.totalEntitiesCount())},this),this.aIdListDeleteProcess=[]}var n=i(2),o=i(46),r=i(43),a=i(44),u=i(211),c=i(181),h=i(182),p=i(237),l=i(186),d=i(233),E=i(238),b=i(231);s.prototype.ViewTemplate="AdminPanelWebclient_EntitiesView",s.prototype.CreateFormViewTemplate="AdminPanelWebclient_EntityCreateFormView",s.prototype.getEntityCreateView=function(){switch(this.sType){case"Tenant":return i(239);case"User":return i(240)}},s.prototype.onShow=function(){this.requestEntities()},s.prototype.search=function(){this.loading(!0),this.oPageSwitcher.setPage(1,b.EntitiesPerPage),this.requestEntities()},s.prototype.clearSearch=function(){this.newSearchValue(""),this.loading(!0),this.requestEntities()},s.prototype.requestEntities=function(){var t={Type:this.sType,Offset:(this.oPageSwitcher.currentPage()-1)*b.EntitiesPerPage,Limit:b.EntitiesPerPage,Search:this.newSearchValue()};this.searchValue(this.newSearchValue()),E.send("GetEntityList",t,function(t){this.loading(!1),t.Result&&n.isArray(t.Result.Items)&&(n.each(t.Result.Items,function(t){t.Id=a.pInt(t.Id),t.checked=o.observable(!1),t.trottleChecked=function(t,e){e.stopPropagation(),this.checked(!this.checked())}}),this.entities(t.Result.Items),this.totalEntitiesCount(a.pInt(t.Result.Count)),0===this.entities().length?this.fChangeEntityHandler(this.sType,void 0,"create"):0!==this.justCreatedId()&&this.fChangeEntityHandler(this.sType,this.justCreatedId()),this.aIdListDeleteProcess=[])},this)},s.prototype.setChangeEntityHandler=function(t){this.fChangeEntityHandler=t},s.prototype.changeEntity=function(t){this.current(a.pInt(t)),this.justCreatedId(0)},s.prototype.openCreateForm=function(){this.showCreateForm(!0),this.oEntityCreateView.clearFields()},s.prototype.cancelCreatingEntity=function(){this.showCreateForm(!1)},s.prototype.createEntity=function(){!this.oEntityCreateView||n.isFunction(this.oEntityCreateView.isValidSaveData)&&!this.oEntityCreateView.isValidSaveData()||(this.isCreating(!0),E.send("Tenant"===this.sType?"CreateTenant":"CreateUser",this.oEntityCreateView.getParametersForSave(),function(t){t.Result?(h.showReport(r.i18n("ADMINPANELWEBCLIENT/REPORT_CREATE_ENTITY_"+this.sType.toUpperCase())),this.justCreatedId(a.pInt(t.Result)),this.cancelCreatingEntity()):c.showErrorByCode(t,r.i18n("ADMINPANELWEBCLIENT/ERROR_CREATE_ENTITY_"+this.sType.toUpperCase())),this.requestEntities(),this.isCreating(!1)},this),this.oEntityCreateView.clearFields())},s.prototype.deleteCurrentEntity=function(){this.deleteEntities([this.current()])},s.prototype.deleteCheckedEntities=function(){var t=n.map(this.checkedEntities(),function(t){return t.Id});this.deleteEntities(t)},s.prototype.deleteEntities=function(t){a.isNonEmptyArray(this.aIdListDeleteProcess)?(t=n.difference(t,this.aIdListDeleteProcess),this.aIdListDeleteProcess=n.union(t,this.aIdListDeleteProcess)):this.aIdListDeleteProcess=t,t.length>0&&l.showPopup(d,[r.i18n("ADMINPANELWEBCLIENT/CONFIRM_DELETE_"+this.sType.toUpperCase()+"_PLURAL",{},null,t.length),n.bind(this.confirmedDeleteEntities,this,t),"",r.i18n("COREWEBCLIENT/ACTION_DELETE")])},s.prototype.confirmedDeleteEntities=function(t,e){e?E.send("DeleteEntities",{Type:this.sType,IdList:t},function(e){e.Result?h.showReport(r.i18n("ADMINPANELWEBCLIENT/REPORT_DELETE_ENTITIES_"+this.sType.toUpperCase()+"_PLURAL",{},null,t.length)):h.showError(r.i18n("ADMINPANELWEBCLIENT/ERROR_DELETE_ENTITIES_"+this.sType.toUpperCase()+"_PLURAL",{},null,t.length)),this.requestEntities()},this):this.aIdListDeleteProcess=[]},s.prototype.groupCheck=function(){var t=!this.hasCheckedEntities();n.each(this.entities(),function(e){e.checked(t)})},t.exports=s},237:function(t,e,i){"use strict";function s(t,e){this.bShown=!1,this.currentPage=r.observable(1),this.count=r.observable(t),this.perPage=r.observable(e),this.firstPage=r.observable(1),this.lastPage=r.observable(1),this.pagesCount=r.computed(function(){var t=this.perPage()>0?Math.ceil(this.count()/this.perPage()):0;return t>0?t:1},this),r.computed(function(){var t=20,e=4,i=this.pagesCount(),s=this.currentPage(),n=s,o=s;if(i>1)for(;;){if(t--,1<n&&(n--,e--),0===e)break;if(i>o&&(o++,e--),0===e)break;if(0===t)break}this.firstPage(n),this.lastPage(o)},this),this.visibleFirst=r.computed(function(){return this.firstPage()>1},this),this.visibleLast=r.computed(function(){return this.lastPage()<this.pagesCount()},this),this.clickPage=n.bind(this.clickPage,this),this.pages=r.computed(function(){var t=this.firstPage(),e=[];if(this.firstPage()<this.lastPage())for(;t<=this.lastPage();t++)e.push({number:t,current:t===this.currentPage(),clickFunc:this.clickPage});return e},this),u.isMobile()||this.hotKeysBind()}var n=i(2),o=i(1),r=i(46),a=i(211),u=i(179);s.prototype.ViewTemplate="CoreWebclient_PageSwitcherView",s.prototype.hotKeysBind=function(){o(document).on("keydown",o.proxy(function(t){if(this.bShown&&!a.isTextFieldFocused()){var e=t.keyCode;t.ctrlKey&&e===Enums.Key.Left?this.clickPreviousPage():t.ctrlKey&&e===Enums.Key.Right&&this.clickNextPage()}},this))},s.prototype.hide=function(){this.bShown=!1},s.prototype.show=function(){this.bShown=!0},s.prototype.clear=function(){this.currentPage(1),this.count(0)},s.prototype.setCount=function(t){this.count(t),this.currentPage()>this.pagesCount()&&this.currentPage(this.pagesCount())},s.prototype.setPage=function(t,e){this.perPage(e),t>this.pagesCount()?this.currentPage(this.pagesCount()):this.currentPage(t)},s.prototype.clickPage=function(t){var e=t.number;e<1&&(e=1),e>this.pagesCount()&&(e=this.pagesCount()),this.currentPage(e)},s.prototype.clickFirstPage=function(){this.currentPage(1)},s.prototype.clickPreviousPage=function(){var t=this.currentPage()-1;t<1&&(t=1),this.currentPage(t)},s.prototype.clickNextPage=function(){var t=this.currentPage()+1;t>this.pagesCount()&&(t=this.pagesCount()),this.currentPage(t)},s.prototype.clickLastPage=function(){this.currentPage(this.pagesCount())},t.exports=s},238:function(t,e,i){"use strict";var s=i(185),n=i(231);t.exports={send:function(t,e,i,o){s.send(n.ServerModuleName,t,e,i,o)}}},239:function(t,e,i){"use strict";function s(){this.sHeading=o.i18n("ADMINPANELWEBCLIENT/HEADING_CREATE_TENANT"),this.id=n.observable(0),this.name=n.observable(""),this.description=n.observable("")}var n=i(46),o=i(43);s.prototype.ViewTemplate="AdminPanelWebclient_EditTenantView",s.prototype.getCurrentValues=function(){return[this.id(),this.name(),this.description()]},s.prototype.clearFields=function(){this.id(0),this.name(""),this.description("")},s.prototype.parse=function(t,e){e?(this.id(t),this.name(e.Name),this.description(e.Description)):this.clearFields()},s.prototype.getParametersForSave=function(){return{Id:this.id(),Name:this.name(),Description:this.description()}},t.exports=new s},240:function(t,e,i){"use strict";function s(){this.sHeading=a.i18n("ADMINPANELWEBCLIENT/HEADING_CREATE_USER"),this.id=r.observable(0),this.publicId=r.observable(""),this.aRoles=[{text:a.i18n("ADMINPANELWEBCLIENT/LABEL_ADMINISTRATOR"),value:Enums.UserRole.SuperAdmin},{text:a.i18n("ADMINPANELWEBCLIENT/LABEL_USER"),value:Enums.UserRole.NormalUser},{text:a.i18n("ADMINPANELWEBCLIENT/LABEL_GUEST"),value:Enums.UserRole.Customer}],this.role=r.observable(Enums.UserRole.NormalUser),this.writeSeparateLog=r.observable(!1),c.broadcastEvent("AdminPanelWebclient::ConstructView::after",{Name:this.ViewConstructorName,View:this})}var n=i(2),o=i(1),r=i(46),a=i(43),u=i(182),c=i(179);s.prototype.ViewTemplate="AdminPanelWebclient_EditUserView",s.prototype.ViewConstructorName="CEditUserView",s.prototype.getCurrentValues=function(){return[this.id(),this.publicId(),this.role(),this.writeSeparateLog()]},s.prototype.clearFields=function(){this.id(0),this.publicId(""),this.role(Enums.UserRole.NormalUser),this.writeSeparateLog(!1)},s.prototype.parse=function(t,e){e?(this.id(t),this.publicId(e.PublicId),this.role(e.Role),this.writeSeparateLog(!!e.WriteSeparateLog)):this.clearFields()},s.prototype.isValidSaveData=function(){var t=""!==o.trim(this.publicId());return t||u.showError(a.i18n("ADMINPANELWEBCLIENT/ERROR_USER_NAME_EMPTY")),t},s.prototype.getParametersForSave=function(){return{Id:this.id(),PublicId:o.trim(this.publicId()),Role:this.role(),WriteSeparateLog:this.writeSeparateLog()}},s.prototype.saveEntity=function(t,e){n.each(t,function(t){"CEntitiesView"===t.constructor.name&&n.isFunction(t.createEntity)&&t.createEntity(),"CCommonSettingsPaneView"===t.constructor.name&&n.isFunction(t.save)&&t.save(e)})},t.exports=new s},241:function(t,e,i){"use strict";function s(){p.call(this,c.ServerModuleName),this.sFakePass="xxxxxxxxxx",this.dbLogin=r.observable(c.DbLogin),this.dbPassword=r.observable(this.sFakePass),this.dbName=r.observable(c.DbName),this.dbHost=r.observable(c.DbHost),this.startError=r.observable(""),this.setStartError()}var n=i(2),o=i(1),r=i(46),a=i(43),u=i(182),c=i(45),h=i(238),p=i(232),l=i(186),d=i(233);n.extendOwn(s.prototype,p.prototype),s.prototype.ViewTemplate="AdminPanelWebclient_DbAdminSettingsView",s.prototype.setStartError=function(){this.startError(""===c.DbLogin||""===c.DbName||""===c.DbHost?a.i18n("ADMINPANELWEBCLIENT/ERROR_DB_ACCESS"):"")},s.prototype.getStartError=function(){return this.startError},s.prototype.getCurrentValues=function(){return[this.dbLogin(),this.dbPassword(),this.dbName(),this.dbHost()]},s.prototype.revertGlobalValues=function(){this.dbLogin(c.DbLogin),this.dbPassword(this.sFakePass),this.dbName(c.DbName),this.dbHost(c.DbHost)},s.prototype.getParametersForSave=function(){return this.dbPassword()===this.sFakePass?{DbLogin:o.trim(this.dbLogin()),DbName:o.trim(this.dbName()),DbHost:o.trim(this.dbHost())}:{DbLogin:o.trim(this.dbLogin()),DbPassword:o.trim(this.dbPassword()),DbName:o.trim(this.dbName()),DbHost:o.trim(this.dbHost())}},s.prototype.applySavedValues=function(t){c.updateDb(t.DbLogin,t.DbName,t.DbHost),this.setStartError()},s.prototype.setAccessLevel=function(t,e){this.visible(""===t)},s.prototype.testConnection=function(){h.send("TestDbConnection",this.getParametersForSave(),function(t){t.Result?u.showReport(a.i18n("ADMINPANELWEBCLIENT/REPORT_DB_CONNECT_SUCCESSFUL")):u.showError(a.i18n("ADMINPANELWEBCLIENT/ERROR_DB_CONNECT_FAILED"))},this)},s.prototype.createTables=function(){var t=function(){h.send("CreateTables",null,function(t){t.Result?u.showReport(a.i18n("ADMINPANELWEBCLIENT/REPORT_CREATE_TABLES_SUCCESSFUL")):u.showError(a.i18n("ADMINPANELWEBCLIENT/ERROR_CREATE_TABLES_FAILED"))})};this.sSavedState!==this.getCurrentState()?l.showPopup(d,[a.i18n("ADMINPANELWEBCLIENT/CONFIRM_SAVE_CHANGES_BEFORE_CREATE_TABLES"),n.bind(function(e){if(e){var i=this.isSaving.subscribe(function(e){e||(t(),i.dispose())},this);this.save()}},this)]):t()},t.exports=new s},242:function(t,e,i){"use strict";function s(){p.call(this,h.ServerModuleName),this.aLanguages=h.LanguageList,this.login=r.observable(h.AdminLogin),this.pass=r.observable(""),this.newPass=r.observable(""),this.confirmPass=r.observable(""),this.selectedLanguage=r.observable(h.AdminLanguage),this.passFocused=r.observable(!1),this.newPassFocused=r.observable(!1),this.startError=r.observable(""),this.setStartError()}var n=i(2),o=i(1),r=i(46),a=i(43),u=i(181),c=i(182),h=i(45),p=i(232);n.extendOwn(s.prototype,p.prototype),s.prototype.ViewTemplate="AdminPanelWebclient_SecurityAdminSettingsView",s.prototype.setStartError=function(){var t=[];h.AdminHasPassword||t.push(a.i18n("ADMINPANELWEBCLIENT/ERROR_ADMIN_EMPTY_PASSWORD")),h.SaltNotEmpty||t.push(a.i18n("ADMINPANELWEBCLIENT/ERROR_SALT_EMPTY")),this.startError(t.join("<br /><br />"))},s.prototype.getStartError=function(){return this.startError},s.prototype.getCurrentValues=function(){return[this.login(),this.pass(),this.newPass(),this.confirmPass(),this.selectedLanguage()]},s.prototype.revertGlobalValues=function(){this.login(h.AdminLogin),this.pass(""),this.newPass(""),this.confirmPass(""),this.selectedLanguage(h.AdminLanguage)},s.prototype.getParametersForSave=function(){var t={AdminLogin:o.trim(this.login()),Password:o.trim(this.pass()),NewPassword:o.trim(this.newPass())};return this.selectedLanguage()!==h.AdminLanguage&&(t.AdminLanguage=this.selectedLanguage()),t},s.prototype.applySavedValues=function(t){this.selectedLanguage()!==h.AdminLanguage&&window.location.reload(),h.updateSecurity(t.AdminLogin,h.AdminHasPassword||""!==t.NewPassword),this.setStartError()},s.prototype.setAccessLevel=function(t,e){this.visible(""===t)},s.prototype.validateBeforeSave=function(){var t=o.trim(this.pass()),e=o.trim(this.newPass()),i=o.trim(this.confirmPass());return h.AdminHasPassword&&""===t&&""!==e?(c.showError(a.i18n("ADMINPANELWEBCLIENT/ERROR_CURRENT_PASSWORD_EMPTY")),this.passFocused(!0),!1):""!==t&&""===e?(c.showError(a.i18n("ADMINPANELWEBCLIENT/ERROR_NEW_PASSWORD_EMPTY")),this.newPassFocused(!0),!1):""===t||e===i||(c.showError(a.i18n("COREWEBCLIENT/ERROR_PASSWORDS_DO_NOT_MATCH")),this.newPassFocused(!0),!1)},s.prototype.onResponse=function(t,e){if(this.isSaving(!1),t.Result){var i=e.Parameters;this.pass(""),this.newPass(""),this.confirmPass(""),this.updateSavedState(),this.applySavedValues(i),c.showReport(a.i18n("COREWEBCLIENT/REPORT_SETTINGS_UPDATE_SUCCESS"))}else u.showErrorByCode(t,a.i18n("COREWEBCLIENT/ERROR_SAVING_SETTINGS_FAILED"))},t.exports=new s},243:function(t,e,i){"use strict";function s(){p.call(this),this.type=o.observable("User"),this.id=o.observable(0),this.entityCreateView=o.computed(function(){switch(this.type()){case"Tenant":return i(239);case"User":return i(240)}},this),this.entityCreateView.subscribe(function(){this.updateSavedState()},this),this.updateSavedState()}var n=i(2),o=i(46),r=i(44),a=i(43),u=i(179),c=i(182),h=i(238),p=i(232);n.extendOwn(s.prototype,p.prototype),s.prototype.ViewTemplate="AdminPanelWebclient_CommonSettingsPaneView",s.prototype.getCurrentValues=function(){return this.entityCreateView()?this.entityCreateView().getCurrentValues():[]},s.prototype.revertGlobalValues=function(){this.entityCreateView()&&this.entityCreateView().clearFields(),this.updateSavedState()},s.prototype.save=function(t){!this.entityCreateView()||n.isFunction(this.entityCreateView().isValidSaveData)&&!this.entityCreateView().isValidSaveData()||h.send("UpdateEntity",{Type:this.type(),Data:this.entityCreateView()?this.entityCreateView().getParametersForSave():{}},function(e){e.Result?c.showReport(a.i18n("ADMINPANELWEBCLIENT/REPORT_UPDATE_ENTITY_"+this.type().toUpperCase())):c.showError(a.i18n("ADMINPANELWEBCLIENT/ERROR_UPDATE_ENTITY_"+this.type().toUpperCase())),t&&n.isFunction(t.currentEntitiesView)&&n.isFunction(t.currentEntitiesView().requestEntities)&&t.currentEntitiesView().requestEntities(),this.updateSavedState()},this)},s.prototype.setAccessLevel=function(t,e){this.visible(""!==t),this.type(t),this.id(r.pInt(e)),r.isPositiveNumber(this.id())?h.send("GetEntity",{Type:this.type(),Id:this.id()},function(t,e){this.id()===e.Parameters.Id&&(this.entityCreateView()&&this.entityCreateView().parse(this.id(),t.Result),this.updateSavedState())},this):this.updateSavedState()},s.prototype.onRoute=function(){u.broadcastEvent("CCommonSettingsPaneView::onRoute::after",{View:this.entityCreateView(),Id:this.id()})},t.exports=new s},245:function(t,e,i){"use strict";var s=i(2),n=i(44);t.exports={ServerModuleName:"BrandingWebclient",HashModuleName:"branding",LoginLogo:"",TabsbarLogo:"",init:function(t){var e=t.BrandingWebclient;s.isEmpty(e)||(this.LoginLogo=n.pString(e.LoginLogo,this.LoginLogo),this.TabsbarLogo=n.pString(e.TabsbarLogo,this.TabsbarLogo))},update:function(t){s.isEmpty(t)||(this.LoginLogo=t.LoginLogo,this.TabsbarLogo=t.TabsbarLogo)}}},246:function(t,e,i){"use strict";function s(){a.call(this,u.ServerModuleName),this.loginLogo=o.observable(u.LoginLogo),this.tabsbarLogo=o.observable(u.TabsbarLogo)}var n=i(2),o=i(46),r=i(42),a=r.run("AdminPanelWebclient","getAbstractSettingsFormViewClass"),u=i(245);n.extendOwn(s.prototype,a.prototype),s.prototype.ViewTemplate="BrandingWebclient_AdminSettingsView",s.prototype.getCurrentValues=function(){return[this.loginLogo(),this.tabsbarLogo()]},s.prototype.revertGlobalValues=function(){this.loginLogo(u.LoginLogo),this.tabsbarLogo(u.TabsbarLogo)},s.prototype.getParametersForSave=function(){return{LoginLogo:this.loginLogo(),TabsbarLogo:this.tabsbarLogo()}},s.prototype.applySavedValues=function(t){u.update(t)},s.prototype.setAccessLevel=function(t,e){this.visible(""===t)},t.exports=new s},266:function(t,e,i){var s,n=n||function(t){"use strict";if(!(void 0===t||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var e=t.document,i=function(){return t.URL||t.webkitURL||t},s=e.createElementNS("http://www.w3.org/1999/xhtml","a"),n="download"in s,o=function(t){var e=new MouseEvent("click");t.dispatchEvent(e)},r=/constructor/i.test(t.HTMLElement)||t.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent),u=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},c="application/octet-stream",h=4e4,p=function(t){var e=function(){"string"==typeof t?i().revokeObjectURL(t):t.remove()};setTimeout(e,h)},l=function(t,e,i){e=[].concat(e);for(var s=e.length;s--;){var n=t["on"+e[s]];if("function"==typeof n)try{n.call(t,i||t)}catch(t){u(t)}}},d=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t},E=function(e,u,h){h||(e=d(e));var E,b=this,g=e.type,S=g===c,v=function(){l(b,"writestart progress write writeend".split(" "))},m=function(){if((a||S&&r)&&t.FileReader){var s=new FileReader;return s.onloadend=function(){var e=a?s.result:s.result.replace(/^data:[^;]*;/,"data:attachment/file;"),i=t.open(e,"_blank");i||(t.location.href=e),e=void 0,b.readyState=b.DONE,v()},s.readAsDataURL(e),void(b.readyState=b.INIT)}if(E||(E=i().createObjectURL(e)),S)t.location.href=E;else{var n=t.open(E,"_blank");n||(t.location.href=E)}b.readyState=b.DONE,v(),p(E)};return b.readyState=b.INIT,n?(E=i().createObjectURL(e),void setTimeout(function(){s.href=E,s.download=u,o(s),v(),p(E),b.readyState=b.DONE})):void m()},b=E.prototype,g=function(t,e,i){return new E(t,e||t.name||"download",i)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(t,e,i){return e=e||t.name||"download",i||(t=d(t)),navigator.msSaveOrOpenBlob(t,e)}:(b.abort=function(){},b.readyState=b.INIT=0,b.WRITING=1,b.DONE=2,b.error=b.onwritestart=b.onprogress=b.onwrite=b.onabort=b.onerror=b.onwriteend=null,g)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);void 0!==t&&t.exports?t.exports.saveAs=n:null!==i(48)&&null!==i(267)&&(s=function(){return n}.call(e,i,e,t),!(void 0!==s&&(t.exports=s)))},267:function(t,e){(function(e){t.exports=e}).call(e,{})},289:function(t,e,i){"use strict";var s=i(2),n=i(46),o=i(44);t.exports={ServerModuleName:"Dropbox",HashModuleName:"dropbox",Connected:!1,EnableModule:!1,Id:"",Secret:"",Scopes:[],init:function(t){var e=t.Dropbox;s.isEmpty(e)||(this.Connected=o.pBool(e.Connected,this.Connected),this.EnableModule=o.pBool(e.EnableModule,this.EnableModule),this.Id=o.pString(e.Id,this.Id),this.Secret=o.pString(e.Secret,this.Secret),this.Scopes=o.pArray(e.Scopes,this.Scopes))},getScopesCopy:function(){var t=[];return s.each(this.Scopes,function(e){t.push({Description:e.Description,Name:e.Name,Value:n.observable(e.Value)})}),t},updateScopes:function(t,e){var i=[];s.each(e,function(t){i.push({Description:t.Description,Name:t.Name,Value:t.Value()})}),this.Connected=t,this.Scopes=i},updateAdmin:function(t,e,i,s){this.EnableModule=t,this.Id=e,this.Secret=i,this.Scopes=s}}},291:function(t,e,i){"use strict";function s(){c.call(this,h.ServerModuleName),this.enable=o.observable(h.EnableModule),this.id=o.observable(h.Id),this.secret=o.observable(h.Secret),this.scopes=o.observable(h.getScopesCopy())}var n=i(2),o=i(46),r=i(43),a=i(42),u=i(182),c=a.run("AdminPanelWebclient","getAbstractSettingsFormViewClass"),h=i(289);n.extendOwn(s.prototype,c.prototype),s.prototype.ViewTemplate="Dropbox_AdminSettingsView",s.prototype.getCurrentValues=function(){var t=n.map(this.scopes(),function(t){return t.Name+t.Value()});return[this.enable(),this.id(),this.secret(),t]},s.prototype.revertGlobalValues=function(){this.enable(h.EnableModule),this.id(h.Id),this.secret(h.Secret),this.scopes(h.getScopesCopy())},s.prototype.validateBeforeSave=function(){return!this.enable()||""!==this.id()&&""!==this.secret()||(u.showError(r.i18n("COREWEBCLIENT/ERROR_REQUIRED_FIELDS_EMPTY")),!1)},s.prototype.getParametersForSave=function(){return{EnableModule:this.enable(),Id:this.id(),Secret:this.secret(),Scopes:n.map(this.scopes(),function(t){return{Name:t.Name,Description:t.Description,Value:t.Value()}})}},s.prototype.applySavedValues=function(t){h.updateAdmin(t.EnableModule,t.Id,t.Secret,t.Scopes)},s.prototype.setAccessLevel=function(t,e){this.visible(""===t)},t.exports=new s},293:function(t,e,i){"use strict";var s=i(2),n=i(46),o=i(44);t.exports={ServerModuleName:"Facebook",HashModuleName:"facebook",Connected:!1,EnableModule:!1,Id:"",Secret:"",Scopes:[],init:function(t){var e=t.Facebook;s.isEmpty(e)||(this.Connected=o.pBool(e.Connected,this.Connected),this.EnableModule=o.pBool(e.EnableModule,this.EnableModule),this.Id=o.pString(e.Id,this.Id),this.Secret=o.pString(e.Secret,this.Secret),this.Scopes=o.pArray(e.Scopes,this.Scopes))},getScopesCopy:function(){var t=[];return s.each(this.Scopes,function(e){t.push({Description:e.Description,Name:e.Name,Value:n.observable(e.Value)})}),t},updateScopes:function(t,e){var i=[];s.each(e,function(t){i.push({Description:t.Description,Name:t.Name,Value:t.Value()})}),this.Connected=t,this.Scopes=i},updateAdmin:function(t,e,i,s){
this.EnableModule=t,this.Id=e,this.Secret=i,this.Scopes=s}}},295:function(t,e,i){"use strict";function s(){c.call(this,h.ServerModuleName),this.enable=o.observable(h.EnableModule),this.id=o.observable(h.Id),this.secret=o.observable(h.Secret),this.scopes=o.observable(h.getScopesCopy())}var n=i(2),o=i(46),r=i(43),a=i(42),u=i(182),c=a.run("AdminPanelWebclient","getAbstractSettingsFormViewClass"),h=i(293);n.extendOwn(s.prototype,c.prototype),s.prototype.ViewTemplate="Facebook_AdminSettingsView",s.prototype.getCurrentValues=function(){var t=n.map(this.scopes(),function(t){return t.Name+t.Value()});return[this.enable(),this.id(),this.secret(),t]},s.prototype.revertGlobalValues=function(){this.enable(h.EnableModule),this.id(h.Id),this.secret(h.Secret),this.scopes(h.getScopesCopy())},s.prototype.validateBeforeSave=function(){return!this.enable()||""!==this.id()&&""!==this.secret()||(u.showError(r.i18n("COREWEBCLIENT/ERROR_REQUIRED_FIELDS_EMPTY")),!1)},s.prototype.getParametersForSave=function(){return{EnableModule:this.enable(),Id:this.id(),Secret:this.secret(),Scopes:n.map(this.scopes(),function(t){return{Name:t.Name,Description:t.Description,Value:t.Value()}})}},s.prototype.applySavedValues=function(t){h.updateAdmin(t.EnableModule,t.Id,t.Secret,t.Scopes)},s.prototype.setAccessLevel=function(t,e){this.visible(""===t)},t.exports=new s},313:function(t,e,i){"use strict";var s=i(46),n=i(2),o=i(44);t.exports={ServerModuleName:"Files",HashModuleName:"files",CustomTabTitle:"",enableModule:s.observable(!0),EnableUploadSizeLimit:!1,PublicFolderName:"",PublicHash:"",UploadSizeLimitMb:0,UserSpaceLimitMb:0,EditFileNameWithoutExtention:!1,ShowCommonSettings:!0,ShowFilesApps:!0,init:function(t){var e=t[this.ServerModuleName],i=t.FilesWebclient;n.isEmpty(e)||(this.CustomTabTitle=o.pString(e.CustomTabTitle,this.CustomTabTitle),this.enableModule=s.observable(o.pBool(e.EnableModule,this.enableModule())),this.EnableUploadSizeLimit=o.pBool(e.EnableUploadSizeLimit,this.EnableUploadSizeLimit),this.PublicFolderName=o.pString(e.PublicFolderName,this.PublicFolderName),this.PublicHash=o.pString(e.PublicHash,this.PublicHash),this.UploadSizeLimitMb=o.pNonNegativeInt(e.UploadSizeLimitMb,this.UploadSizeLimitMb),this.UserSpaceLimitMb=o.pNonNegativeInt(e.UserSpaceLimitMb,this.UserSpaceLimitMb)),n.isEmpty(i)||(this.EditFileNameWithoutExtention=o.pBool(i.EditFileNameWithoutExtention,this.EditFileNameWithoutExtention),this.ShowCommonSettings=o.pBool(i.ShowCommonSettings,this.ShowCommonSettings),this.ShowFilesApps=o.pBool(i.ShowFilesApps,this.ShowFilesApps))},update:function(t){this.enableModule("1"===t)},updateAdmin:function(t,e,i){this.EnableUploadSizeLimit=t,this.UploadSizeLimitMb=e,this.UserSpaceLimitMb=i}}},329:function(t,e,i){"use strict";function s(){u.call(this,c.ServerModuleName),this.enableUploadSizeLimit=o.observable(c.EnableUploadSizeLimit),this.uploadSizeLimitMb=o.observable(c.UploadSizeLimitMb),this.userSpaceLimitMb=o.observable(c.UserSpaceLimitMb)}var n=i(2),o=i(46),r=i(44),a=i(42),u=a.run("AdminPanelWebclient","getAbstractSettingsFormViewClass"),c=i(313);n.extendOwn(s.prototype,u.prototype),s.prototype.ViewTemplate="FilesWebclient_FilesAdminSettingsView",s.prototype.getCurrentValues=function(){return[this.enableUploadSizeLimit(),this.uploadSizeLimitMb(),this.userSpaceLimitMb()]},s.prototype.revertGlobalValues=function(){this.enableUploadSizeLimit(c.EnableUploadSizeLimit),this.uploadSizeLimitMb(c.UploadSizeLimitMb),this.userSpaceLimitMb(c.UserSpaceLimitMb)},s.prototype.getParametersForSave=function(){return{EnableUploadSizeLimit:this.enableUploadSizeLimit(),UploadSizeLimitMb:r.pInt(this.uploadSizeLimitMb()),UserSpaceLimitMb:r.pInt(this.userSpaceLimitMb())}},s.prototype.applySavedValues=function(t){c.updateAdmin(t.EnableUploadSizeLimit,t.UploadSizeLimitMb,t.UserSpaceLimitMb)},s.prototype.setAccessLevel=function(t,e){this.visible(""===t)},t.exports=new s},331:function(t,e,i){"use strict";var s=i(2),n=i(46),o=i(44);t.exports={ServerModuleName:"Google",HashModuleName:"google",Connected:!1,EnableModule:!1,Id:"",Secret:"",Key:"",Scopes:[],init:function(t){var e=s.extend({},t[this.ServerModuleName]||{},t.Google||{});s.isEmpty(e)||(this.Connected=o.pBool(e.Connected,this.Connected),this.EnableModule=o.pBool(e.EnableModule,this.EnableModule),this.Id=o.pString(e.Id,this.Id),this.Secret=o.pString(e.Secret,this.Secret),this.Key=o.pString(e.Key,this.Key),this.Scopes=o.pArray(e.Scopes,this.Scopes))},getScopesCopy:function(){var t=[];return s.each(this.Scopes,function(e){t.push({Description:e.Description,Name:e.Name,Value:n.observable(e.Value)})}),t},updateScopes:function(t,e){var i=[];s.each(e,function(t){i.push({Description:t.Description,Name:t.Name,Value:t.Value()})}),this.Connected=t,this.Scopes=i},updateAdmin:function(t,e,i,s,n){this.EnableModule=t,this.Id=e,this.Secret=i,this.Key=s,this.Scopes=n}}},333:function(t,e,i){"use strict";function s(){c.call(this,h.ServerModuleName),this.enable=o.observable(h.EnableModule),this.id=o.observable(h.Id),this.secret=o.observable(h.Secret),this.key=o.observable(h.Key),this.scopes=o.observable(h.getScopesCopy())}var n=i(2),o=i(46),r=i(43),a=i(42),u=i(182),c=a.run("AdminPanelWebclient","getAbstractSettingsFormViewClass"),h=i(331);n.extendOwn(s.prototype,c.prototype),s.prototype.ViewTemplate="Google_AdminSettingsView",s.prototype.getCurrentValues=function(){var t=n.map(this.scopes(),function(t){return t.Name+t.Value()});return[this.enable(),this.id(),this.secret(),this.key(),t]},s.prototype.revertGlobalValues=function(){this.enable(h.EnableModule),this.id(h.Id),this.secret(h.Secret),this.key(h.Key),this.scopes(h.getScopesCopy())},s.prototype.validateBeforeSave=function(){return!this.enable()||""!==this.id()&&""!==this.secret()&&""!==this.key()||(u.showError(r.i18n("COREWEBCLIENT/ERROR_REQUIRED_FIELDS_EMPTY")),!1)},s.prototype.getParametersForSave=function(){return{EnableModule:this.enable(),Id:this.id(),Secret:this.secret(),Key:this.key(),Scopes:n.map(this.scopes(),function(t){return{Name:t.Name,Description:t.Description,Value:t.Value()}})}},s.prototype.applySavedValues=function(t){h.updateAdmin(t.EnableModule,t.Id,t.Secret,t.Key,t.Scopes)},s.prototype.setAccessLevel=function(t,e){this.visible(""===t)},t.exports=new s},337:function(t,e,i){"use strict";var s=i(2),n=i(44);t.exports={ServerModuleName:"LogsViewerWebclient",HashModuleName:"logs-viewer",EnableLogging:!1,EnableEventLogging:!1,LoggingLevel:0,LogSizeBytes:0,EventLogSizeBytes:0,LogFileName:"",EventLogFileName:"",init:function(t){var e=t.Core;s.isEmpty(e)||(this.ELogLevel=n.pObject(e.ELogLevel),this.EnableLogging=n.pBool(e.EnableLogging),this.EnableEventLogging=n.pBool(e.EnableEventLogging),this.LoggingLevel=n.pEnum(e.LoggingLevel,this.ELogLevel,this.LoggingLevel),this.updateLogsData(n.pObject(e.LogFilesData)))},updateLogging:function(t,e,i){this.EnableLogging=!!t,this.EnableEventLogging=!!e,this.LoggingLevel=n.pInt(i)},updateLogsData:function(t){this.LogSizeBytes=n.pInt(t.LogSizeBytes),this.EventLogSizeBytes=n.pInt(t.EventLogSizeBytes),this.LogFileName=n.pString(t.LogFileName),this.EventLogFileName=n.pString(t.EventLogFileName)}}},339:function(t,e,i){"use strict";function s(){E.call(this,"Core"),this.iViewLogSizeBytes=10240,this.aLevelOptions=[{text:u.i18n("LOGSVIEWERWEBCLIENT/LABEL_LOGGING_DEBUG"),value:Enums.LogLevel.Full},{text:u.i18n("LOGSVIEWERWEBCLIENT/LABEL_LOGGING_WARNINGS"),value:Enums.LogLevel.Warning},{text:u.i18n("LOGSVIEWERWEBCLIENT/LABEL_LOGGING_ERRORS"),value:Enums.LogLevel.Error}],this.logSize=r.observable(l.LogSizeBytes),this.downloadLogText=r.computed(function(){return u.i18n("LOGSVIEWERWEBCLIENT/BUTTON_LOGGING_DOWNLOAD",{SIZE:u.getFriendlySize(this.logSize())})},this),this.viewLogText=r.computed(function(){return this.logSize()<this.iViewLogSizeBytes?u.i18n("LOGSVIEWERWEBCLIENT/BUTTON_LOGGING_VIEW"):u.i18n("LOGSVIEWERWEBCLIENT/BUTTON_LOGGING_VIEW_LAST",{SIZE:u.getFriendlySize(this.iViewLogSizeBytes)})},this),this.eventsLogSize=r.observable(l.EventLogSizeBytes),this.downloadEventsLogText=r.computed(function(){return u.i18n("LOGSVIEWERWEBCLIENT/BUTTON_LOGGING_DOWNLOAD_EVENTS",{SIZE:u.getFriendlySize(this.eventsLogSize())})},this),this.viewEventsLogText=r.computed(function(){return this.eventsLogSize()<this.iViewLogSizeBytes?u.i18n("LOGSVIEWERWEBCLIENT/BUTTON_LOGGING_VIEW"):u.i18n("LOGSVIEWERWEBCLIENT/BUTTON_LOGGING_VIEW_LAST",{SIZE:u.getFriendlySize(this.iViewLogSizeBytes)})},this),this.usersWithSeparateLog=r.observableArray([]),this.enableLogging=r.observable(l.EnableLogging),this.enableEventLogging=r.observable(l.EnableEventLogging),this.loggingLevel=r.observable(l.LoggingLevel)}var n=i(2),o=i(1),r=i(46),a=i(266),u=i(43),c=i(44),h=i(185),p=i(194),l=i(337),d=i(42),E=d.run("AdminPanelWebclient","getAbstractSettingsFormViewClass");n.extendOwn(s.prototype,E.prototype),s.prototype.ViewTemplate="LogsViewerWebclient_AdminSettingsView",s.prototype.onRouteChild=function(){this.setUpdateStatusTimer(),h.send(l.ServerModuleName,"GetUsersWithSeparateLog",null,function(t){t.Result&&n.isArray(t.Result)&&this.usersWithSeparateLog(t.Result)},this)},s.prototype.turnOffSeparateLogs=function(){this.usersWithSeparateLog([]),h.send(l.ServerModuleName,"TurnOffSeparateLogs")},s.prototype.clearSeparateLogs=function(){h.send(l.ServerModuleName,"ClearSeparateLogs")},s.prototype.setUpdateStatusTimer=function(){this.bShown&&setTimeout(n.bind(function(){h.send(l.ServerModuleName,"GetLogFilesData",null,function(t){t.Result&&(l.updateLogsData(t.Result),this.logSize(l.LogSizeBytes),this.eventsLogSize(l.EventLogSizeBytes)),this.setUpdateStatusTimer()},this)},this),5e3)},s.prototype.getCurrentValues=function(){return[this.enableLogging(),this.enableEventLogging(),c.pInt(this.loggingLevel())]},s.prototype.revertGlobalValues=function(){this.enableLogging(l.EnableLogging),this.enableEventLogging(l.EnableEventLogging),this.loggingLevel(l.LoggingLevel)},s.prototype.getParametersForSave=function(){return{EnableLogging:this.enableLogging(),EnableEventLogging:this.enableEventLogging(),LoggingLevel:c.pInt(this.loggingLevel())}},s.prototype.applySavedValues=function(t){l.updateLogging(t.EnableLogging,t.EnableEventLogging,t.LoggingLevel)},s.prototype.setAccessLevel=function(t,e){this.visible(""===t)},s.prototype.downloadLog=function(t,e){h.send(l.ServerModuleName,"GetLogFile",{EventsLog:t,PublicId:e||""},function(i){var s=new Blob([i.ResponseText],{type:"text/plain;charset=utf-8"}),n=""!==c.pString(e)?e+"-":"";a.saveAs(s,t?l.EventLogFileName:n+l.LogFileName)},this,void 0,{Format:"Raw"})},s.prototype.viewLog=function(t){h.send(l.ServerModuleName,"GetLog",{EventsLog:t},function(t){if(t.Result){var e=p.open("","view-log");e&&o(e.document.body).html("<pre>"+t.Result+"</pre>")}},this)},s.prototype.clearLog=function(t){h.send(l.ServerModuleName,"ClearLog",{EventsLog:t},function(e){e.Result&&(t?this.eventsLogSize(0):this.logSize(0))},this)},t.exports=new s},341:function(t,e,i){"use strict";var s=i(2),n=i(44);t.exports={ServerModuleName:"MobileSync",HashModuleName:"mobilesync",ServerDavModuleName:"Dav",ExternalHostNameOfDAVServer:"",init:function(t){var e=t[this.ServerDavModuleName];s.isEmpty(e)||(this.ExternalHostNameOfDAVServer=n.pString(e.ExternalHostNameOfDAVServer,this.ExternalHostNameOfDAVServer))},update:function(t){this.ExternalHostNameOfDAVServer=t}}},343:function(t,e,i){"use strict";function s(){a.call(this,u.ServerDavModuleName),this.davServer=o.observable(u.ExternalHostNameOfDAVServer)}var n=i(2),o=i(46),r=i(42),a=r.run("AdminPanelWebclient","getAbstractSettingsFormViewClass"),u=i(341);n.extendOwn(s.prototype,a.prototype),s.prototype.ViewTemplate="MobileSyncWebclient_DavAdminSettingsView",s.prototype.getCurrentValues=function(){return[this.davServer()]},s.prototype.revertGlobalValues=function(){this.davServer(u.ExternalHostNameOfDAVServer)},s.prototype.getParametersForSave=function(){return{ExternalHostNameOfDAVServer:this.davServer()}},s.prototype.applySavedValues=function(t){u.update(t.ExternalHostNameOfDAVServer)},s.prototype.setAccessLevel=function(t,e){this.visible(""===t)},t.exports=new s},352:function(t,e,i){"use strict";var s=i(46),n=i(179);t.exports={ServerModuleName:"StandardAuth",HashModuleName:"standardauth",userAccountsCount:s.observable(0),accountsEmails:s.observableArray([]),init:function(t){n.registerUserAccountsCount(this.userAccountsCount),n.registerAccountsWithPass(this.accountsEmails)}}},353:function(t,e,i){"use strict";function s(){n.call(this,b.ServerModuleName),this.sFakePass="xxxxxxxx",this.iUserId=l.getUserId(),this.accounts=a.observableArray([]),this.currentAccountId=a.observable(0),this.createAccountHeading=a.computed(function(){return 0===this.accounts().length?u.i18n("STANDARDAUTHWEBCLIENT/HEADING_CREATE_FIRST_ACCOUNT"):0===this.currentAccountId()?u.i18n("STANDARDAUTHWEBCLIENT/HEADING_CREATE_NEW_ACCOUNT"):u.i18n("STANDARDAUTHWEBCLIENT/HEADING_EDIT_NEW_ACCOUNT")},this),this.updateButtonText=a.computed(function(){return 0===this.currentAccountId()?u.i18n("STANDARDAUTHWEBCLIENT/ACTION_CREATE"):u.i18n("STANDARDAUTHWEBCLIENT/ACTION_UPDATE")},this),this.updateProgressButtonText=a.computed(function(){return 0===this.currentAccountId()?u.i18n("STANDARDAUTHWEBCLIENT/ACTION_CREATE_IN_PROGRESS"):u.i18n("STANDARDAUTHWEBCLIENT/ACTION_UPDATE_IN_PROGRESS")},this),this.sUserPublicId="",this.login=a.observable(""),this.loginFocus=a.observable(!1),this.pass=a.observable(""),this.passFocus=a.observable(!1),this.confirmPass=a.observable(""),this.confirmPassFocus=a.observable(!1),this.visibleCreateForm=a.observable(!1),this.isCreating=a.observable(!1),l.getUserRole()===Enums.UserRole.NormalUser&&(this.requestAccounts(),a.computed(function(){this.visible(this.accounts().length>0)},this)),l.subscribeEvent(S.ServerModuleName+"::CreateUserAuthAccount",o.bind(function(t){g.send("CreateAuthenticatedUserAccount",{Login:t.Login,Password:t.Password},o.bind(function(e){e.Result?(this.accounts.push({id:e.Result.EntityId,login:t.Login}),l.broadcastEvent("OpenSettingTab",{Name:this.SettingsTabName})):p.showErrorByCode(e)},this))},this)),l.subscribeEvent("ReceiveAjaxResponse::after",o.bind(function(t){"AdminPanelWebclient"===t.Request.Module&&"GetEntity"===t.Request.Method&&t.Response.Result&&t.Request.Parameters.Id===this.iUserId&&(this.sUserPublicId=t.Response.Result.PublicId,this.login(this.sUserPublicId))},this)),l.broadcastEvent("StandardAuthWebclient::ConstructView::after",{Name:this.ViewConstructorName,View:this})}var n,o=i(2),r=i(1),a=i(46),u=i(43),c=i(186),h=i(233),p=i(181),l=i(179),d=i(42),E=i(182),b=i(45),g=i(354),S=i(352);n=l.getUserRole()===Enums.UserRole.SuperAdmin?d.run("AdminPanelWebclient","getAbstractSettingsFormViewClass"):d.run("SettingsWebclient","getAbstractSettingsFormViewClass"),o.extendOwn(s.prototype,n.prototype),s.prototype.ViewTemplate="StandardAuthWebclient_StandardAccountsSettingsFormView",s.prototype.ViewConstructorName="CStandardAccountsSettingsFormView",s.prototype.onShow=function(){this.requestAccounts(),l.broadcastEvent("CStandardAccountsSettingsFormView::onShow::after",{Name:this.ViewConstructorName,View:this})},s.prototype.onRouteChild=s.prototype.onShow,s.prototype.requestAccounts=function(){g.send("GetUserAccounts",{UserId:this.iUserId},function(t){o.isArray(t.Result)?this.accounts(t.Result):(p.showErrorByCode(t),this.accounts([])),0===this.accounts().length?this.openEditAccountForm(0):this.openEditAccountForm(this.accounts()[0].id)},this)},s.prototype.setAccessLevel=function(t,e){this.visible("User"===t),this.iUserId!==e&&(this.accounts([]),this.hideEditAccountForm(),this.iUserId=e||-1,this.sUserPublicId="")},s.prototype.confirmAccountDeleting=function(t,e){c.showPopup(h,[u.i18n("STANDARDAUTHWEBCLIENT/CONFIRM_DELETE_ACCOUNT"),o.bind(this.deleteAccount,this,t),e])},s.prototype.deleteAccount=function(t,e){e&&g.send("DeleteAccount",{AccountId:t},function(t){t.Result?E.showReport(u.i18n("STANDARDAUTHWEBCLIENT/REPORT_DELETE_ACCOUNT")):p.showErrorByCode(t,u.i18n("STANDARDAUTHWEBCLIENT/ERROR_DELETE_ACCOUNT")),this.requestAccounts()},this)},s.prototype.openEditAccountForm=function(t){var e=o.find(this.accounts(),function(e){return e.id===t});e?(this.currentAccountId(t),this.login(e.login),this.pass(this.sFakePass),this.passFocus(!0),this.confirmPass("")):(this.currentAccountId(0),this.login(this.sUserPublicId),this.loginFocus(!0),this.pass(""),this.confirmPass("")),this.visibleCreateForm(!0)},s.prototype.saveAccount=function(){var t=r.trim(this.login()),e=r.trim(this.pass());""===t?this.loginFocus(!0):""===e||e===this.sFakePass?this.passFocus(!0):e!==r.trim(this.confirmPass())?(E.showError(u.i18n("COREWEBCLIENT/ERROR_PASSWORDS_DO_NOT_MATCH")),this.confirmPassFocus(!0)):0===this.currentAccountId()?g.send("CreateAuthenticatedUserAccount",{Login:t,Password:e},function(t){t.Result?(E.showReport(u.i18n("STANDARDAUTHWEBCLIENT/REPORT_CREATE_ACCOUNT")),this.hideEditAccountForm(),this.requestAccounts()):p.showErrorByCode(t,u.i18n("STANDARDAUTHWEBCLIENT/ERROR_CREATE_ACCOUNT"))},this):g.send("UpdateAccount",{AccountId:this.currentAccountId(),Password:e},function(t){t.Result?(E.showReport(u.i18n("STANDARDAUTHWEBCLIENT/REPORT_UPDATE_ACCOUNT")),this.hideEditAccountForm()):p.showErrorByCode(t,u.i18n("STANDARDAUTHWEBCLIENT/ERROR_UPDATE_ACCOUNT")),this.requestAccounts()},this)},s.prototype.hideEditAccountForm=function(){this.currentAccountId(0),this.visibleCreateForm(!1)},t.exports=new s},354:function(t,e,i){"use strict";var s=i(185),n=i(352);t.exports={send:function(t,e,i,o){s.send(n.ServerModuleName,t,e,i,o)}}}});