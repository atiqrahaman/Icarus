webpackJsonp([13],{334:function(e,i,t){"use strict";e.exports=function(e){t(208);var i=t(1),n=t(46),s=t(43),o=t(44),a=t(185),r=t(179),u=t(189),l=t(182),d=t(45),I=t(335),R=r.getUserRole()===Enums.UserRole.SuperAdmin,c=r.getUserRole()===Enums.UserRole.Anonymous,v=function(){var e=u.getCurrentHashArray();return e.length>=2&&e[0]===I.RegisterModuleHash?e[1]:""},N=v();return I.init(e),!r.isPublic()&&c?{start:function(e){r.subscribeEvent("StandardRegisterFormWebclient::ShowView::after",function(e){"CRegisterView"===e.Name&&(N=v(),""!==N?i.cookie("InvitationLinkHash",N,{expires:30}):i.removeCookie("InvitationLinkHash"),a.send(I.ServerModuleName,"GetUserPublicId",{InvitationLinkHash:N},function(e){e.Result?r.broadcastEvent("ShowWelcomeRegisterText",{UserName:e.Result,WelcomeText:s.i18n("INVITATIONLINKWEBCLIENT/INFO_WELCOME",{USERNAME:e.Result,SITE_NAME:d.SiteName})}):(l.showError(s.i18n("INVITATIONLINKWEBCLIENT/REPORT_INVITATION_LINK_INCORRECT"),!0),u.setHash([I.LoginModuleHash]))}))}),r.subscribeEvent("SendAjaxRequest::before",function(e){e.Module===I.RegisterModuleName&&"Register"===e.Method&&(e.Parameters.InvitationLinkHash=N)})}}:(i.removeCookie("InvitationLinkHash"),""!==N&&(a.send(I.ServerModuleName,"GetUserPublicId",{InvitationLinkHash:N},function(e){e.Result&&l.showReport(s.i18n("INVITATIONLINKWEBCLIENT/REPORT_LOGGED_IN"),0)}),r.subscribeEvent("clearAndReloadLocation::before",function(e){e.OnlyReload=!0})),R?{start:function(e){var i=0,t=0,d={},R={},c=null;r.subscribeEvent("ReceiveAjaxResponse::after",function(e){if("CreateAuthenticatedUserAccount"===e.Response.Method&&"StandardAuth"===e.Response.Module&&e.Response.Result){var i=r.getUserId();delete d[i],delete R[i]}}),r.subscribeEvent("StandardAuthWebclient::ConstructView::after",function(e){"CStandardAccountsSettingsFormView"===e.Name&&(e.View.showPasswordRevokesInvitationHint=n.observable(!1))}),r.subscribeEvent("CStandardAccountsSettingsFormView::onShow::after",function(e){i=e.View.iUserId,e.View.showPasswordRevokesInvitationHint(!!R[i]),d[i]||a.send(I.ServerModuleName,"GetInvitationLinkHash",{UserId:i},function(t,n){var s=o.pInt(n&&n.Parameters&&n.Parameters.UserId),a=t.Result?u.getAppUrlWithHash([I.RegisterModuleHash,t.Result]):"";s>0&&s===i&&(d[i]=a,R[i]=t.Result,e.View.showPasswordRevokesInvitationHint(!!R[i]))})}),r.subscribeEvent("AdminPanelWebclient::ConstructView::after",function(e){"CEditUserView"===e.Name&&(e.View.invitationLink=n.observable(""),e.View.bEnableSendInvitationLinkViaMail=I.EnableSendInvitationLinkViaMail,e.View.resendInvitationLink=function(){a.send(I.ServerModuleName,"SendNotification",{Email:e.View.publicId(),Hash:R[i]},function(e){e.Result?l.showReport(s.i18n("INVITATIONLINKWEBCLIENT/REPORT_SEND_LINK")):l.showError(s.i18n("INVITATIONLINKWEBCLIENT/ERROR_SEND_LINK"))})},c=e.View)}),r.subscribeEvent("CCommonSettingsPaneView::onRoute::after",function(e){i=o.pInt(e.Id),i>0?(e.View.invitationLink(d[i]?d[i]:""),d[i]||a.send(I.ServerModuleName,"GetInvitationLinkHash",{UserId:i},function(t,n){var s=o.pInt(n&&n.Parameters&&n.Parameters.UserId),a=t.Result?u.getAppUrlWithHash([I.RegisterModuleHash,t.Result]):"";s>0&&s===i&&(e.View.invitationLink(a),d[i]=a,R[i]=t.Result)})):e.View.invitationLink("")}),r.subscribeEvent("ReceiveAjaxResponse::after",function(e){var n=e.Response;c&&"AdminPanelWebclient"===n.Module&&"CreateUser"===n.Method&&n.Result&&(t=o.pInt(n.Result)),t===i&&c&&"InvitationLinkWebclient"===n.Module&&"GetInvitationLinkHash"===n.Method&&n.Result&&(t=0,a.send(I.ServerModuleName,"SendNotification",{Email:c.publicId(),Hash:R[i]},function(e){e.Result||l.showReport(s.i18n("INVITATIONLINKWEBCLIENT/ERROR_AUTO_SEND_LINK"))}))})}}:null)}},335:function(e,i,t){"use strict";var n=t(2),s=t(44);e.exports={ServerModuleName:"InvitationLinkWebclient",RegisterModuleName:"StandardRegisterFormWebclient",RegisterModuleHash:"register",LoginModuleHash:"login",EnableSendInvitationLinkViaMail:!0,init:function(e){var i=e.InvitationLinkWebclient;n.isEmpty(i)||(this.RegisterModuleName=s.pString(i.RegisterModuleName,this.RegisterModuleName),this.RegisterModuleHash=s.pString(i.RegisterModuleHash,this.RegisterModuleHash),this.LoginModuleHash=s.pString(i.LoginModuleHash,this.LoginModuleHash),this.EnableSendInvitationLinkViaMail=s.pBool(i.EnableSendInvitationLinkViaMail,this.EnableSendInvitationLinkViaMail))}}}});